<html>
  <head>
  
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <meta charset="utf-8">
    <title>Your First WebSocket!</title>
    
    <link rel="stylesheet" href="assets/mdl/material.blue_grey-light_blue.min.css">
    <link rel="stylesheet" href="assets/mdl-selectfield/mdl-selectfield.min.css">
    <link rel="stylesheet" href="assets/mdl-stepper/materialize.stepper.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://fonts.googleapis.com/css?family=Chelsea+Market|Anton|Spinnaker|Oswald|Audiowide|Chonburi|Doppio+One|Faster+One|Fjalla+One|Jockey+One|Kanit|Krona+One|Limelight|Montserrat:400,700|Notable|Orbitron|Poller+One|Roboto|Roboto+Mono:300,400,500,700|Staatliches|Ubuntu+Condensed|Uncial+Antiqua|Crimson+Text|Noto+Serif&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="assets/css/styles.css" />
    
    <script src="assets/mdl/material.js"></script>
	<script src="assets/mdl-selectfield/mdl-selectfield.js"></script>
    <script src="assets/mdl-stepper/materialize.min.js"></script>
    <script src="assets/mdl-stepper/materialize.stepper.js"></script>
    
    <script src="assets/js/framework/jquery.js" type="text/javascript"></script>
	<script type="text/javascript">
      jQuery.noConflict();
    </script>
    
    <script src="assets/js/data.js"></script>
    
    <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
    <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-alpine.css">
    
    <script language="javascript" type="text/javascript">
        
        var wsUri = "ws://localhost:8080/javaee7-websocket-basic/hello";
        
        function init() {
            output = document.getElementById("output");
        }
        function send_message() {
            websocket = new WebSocket(wsUri);
            websocket.onopen = function(evt) {
                onOpen(evt)
            };
            websocket.onmessage = function(evt) {
                onMessage(evt)
            };
            websocket.onerror = function(evt) {
                onError(evt)
            };
        }
        function onOpen(evt) {
            writeToScreen("Connected to Endpoint!");
            doSend(textID.value);
        }
        function onMessage(evt) {
            writeToScreen("Message Received: " + evt.data);
        }
        function onError(evt) {
            writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
        }
        function doSend(message) {
            writeToScreen("Message Sent: " + message);
            websocket.send(message);
            // You can close communication at any time
            //websocket.close();
        }
        function writeToScreen(message) {
            var pre = document.createElement("p");
            pre.style.wordWrap = "break-word";
            pre.innerHTML = message;
             
            output.appendChild(pre);
        }
        window.addEventListener("load", init, false);
		
		jQuery(document).ready(function() {
		  console.log( "ready!" );
		  const eGridDiv = document.querySelector('#myGrid');
		  /*const columnDefs = [
			{ field: "id" },
			{ field: "name" },
			{ field: "assignee" },
			{ field: "created" }
		  ];*/
		  initAgGrid(eGridDiv);
		});
    </script>
      
  </head>
    <body>
        
      <!--<h1 style="text-align: center;">Custom Task WebSocket Client</h2>
      <br>
      <div style="text-align: center;">
        <form action="">
          <input onclick="send_message()" value="Send Message" type="button">
          <input id="textID" name="message" value="Hello WebSocket!" type="text"><br>
        </form>
      </div>
      <div id="output"></div>-->
      
      <!-- Always shows a header, even in smaller screens. -->
      <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
          <div class="mdl-layout__header-row">
            <!-- Title -->
            <span class="mdl-layout-title">Title</span>
            <!-- Add spacer, to align navigation to the right -->
            <div class="mdl-layout-spacer"></div>
            <!-- Navigation. We hide it in small screens. -->
            <nav class="mdl-navigation mdl-layout--large-screen-only">
              <a class="mdl-navigation__link" href="">Link</a>
              <a class="mdl-navigation__link" href="">Link</a>
              <a class="mdl-navigation__link" href="">Link</a>
              <a class="mdl-navigation__link" href="">Link</a>
            </nav>
          </div>
        </header>
        <div class="mdl-layout__drawer">
          <span class="mdl-layout-title">Title</span>
          <nav class="mdl-navigation">
            <a class="mdl-navigation__link" href="">Link</a>
            <a class="mdl-navigation__link" href="">Link</a>
            <a class="mdl-navigation__link" href="">Link</a>
            <a class="mdl-navigation__link" href="">Link</a>
          </nav>
        </div>
        <main class="mdl-layout__content">
          <div class="page-content">
          
            <div class="mdl-grid">
				
              <div id="page-content-left-container" class="mdl-cell mdl-cell--2-col mdl-cell--8-col-tablet mdl-cell--4-col-phone light">
              </div>
              
              <div id="page-content-container" class="mdl-cell mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone light">
                <div class="container">
          
                  <!--<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
                    <thead>
                      <tr>
                        <th class="mdl-data-table__cell--non-numeric">Id</th>
                        <th class="mdl-data-table__cell--non-numeric">Name</th>
                        <th class="mdl-data-table__cell--non-numeric">Assignee</th>
                        <th class="mdl-data-table__cell--non-numeric">Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="body">
                        <td class="mdl-data-table__cell--non-numeric">task-100</td>
                        <td class="mdl-data-table__cell--non-numeric">My Task 100</td>
                        <td class="mdl-data-table__cell--non-numeric">John</td>
                        <td class="mdl-data-table__cell--non-numeric">Updated</td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <th colspan="6" align="right" style="text-align:right;">&nbsp;</th>
                      </tr>
                    </tfoot>
                  </table>-->
                  
                  <!--<div id="myGrid" class="ag-theme-alpine" style="height: 600px; width:500px;"></div>

				  <script type="text/javascript" charset="utf-8">
                    // specify the columns
                    const columnDefs = [
                      { field: "make" },
                      { field: "model" },
                      { field: "price" }
                    ];
                
                    // specify the data
                    const rowData = [
                      { make: "Toyota", model: "Celica", price: 35000 },
                      { make: "Ford", model: "Mondeo", price: 32000 },
                      { make: "Porsche", model: "Boxter", price: 72000 }
                    ];
                
                    // let the grid know which columns and what data to use
                    const gridOptions = {
                      columnDefs: columnDefs,
                      rowData: rowData
                    };
                
					// lookup the container we want the Grid to use
					const eGridDiv = document.querySelector('#myGrid');
				  
					// create the grid passing in the div to use together with the columns & data we want to use
					new agGrid.Grid(eGridDiv, gridOptions);
                
                  </script>-->
                  
                  <div id="myGrid" class="ag-theme-alpine" style="height: 600px; width:100%;"></div>
                  
                </div>
              </div>
              
              <div id="page-content-right-container" class="mdl-cell mdl-cell--2-col mdl-cell--8-col-tablet mdl-cell--4-col-phone light">
              </div>
            
          </div>
        </main>
      </div>
        
  </body>
</html>